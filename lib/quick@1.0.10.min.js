document.head.insertAdjacentHTML("beforeend","<style>\n[class^=\"quick-\"] {\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -moz-user-select: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  user-select: none;\n}\nbutton {\n  position: relative;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  white-space: nowrap;\n  cursor: pointer;\n  transition: opacity .3s;\n}\nbutton:hover {\n  opacity: .8;\n}\nbutton:active {\n  opacity: 1;\n}\nbutton:disabled {\n  opacity: .5 !important;\n  cursor: default;\n}\n.quick-btn-loading {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: inherit;\n  background: inherit;\n}\n.quick-btn-loading:before {\n  content: '';\n  position: absolute;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border-top: 2px solid rgba(255, 255, 255, 0.3);\n  border-right: 2px solid rgba(255, 255, 255, 0.3);\n  border-bottom: 2px solid rgba(255, 255, 255, 0.3);\n  border-left: 2px solid currentColor;\n  animation: spin .6s linear infinite;\n}\n.quick-overlay {\n  position: fixed;\n  z-index: 5000;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n}\n.quick-loading {\n  position: fixed;\n  z-index: 5100;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 32px;\n  height: 32px;\n  margin: auto;\n  border-radius: 50%;\n  border-top: 3px solid rgba(255, 255, 255, 0.2);\n  border-right: 3px solid rgba(255, 255, 255, 0.2);\n  border-bottom: 3px solid rgba(255, 255, 255, 0.2);\n  border-left: 3px solid rgba(255, 255, 255, 0.8);\n  animation: spin .6s linear infinite;\n}\n.quick-progress {\n  position: fixed;\n  z-index: 5100;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 1px;\n  background: #0c7;\n  transition: width .3s linear;\n}\n.quick-info {\n  background: transparent;\n  height: 0;\n  display: flex;\n  justify-content: center;\n}\n.quick-info>div {\n  margin-top: 80px;\n  margin-bottom: auto;\n  max-width: 80%;\n  padding: 6px 15px;\n  border-radius: 3px;\n  font-weight: 700;\n  color: #fff;\n}\n.quick-dialog {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.quick-dialog-panel {\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n  max-width: 80%;\n  max-height: 80%;\n  min-width: 280px;\n  border-radius: 5px;\n  overflow: hidden;\n}\n.quick-dialog-header {\n  font-weight: 700;\n  padding: 20px 20px 0;\n  text-align: center;\n}\n.quick-dialog-body {\n  flex: 1;\n  overflow-x: hidden;\n  overflow-y: auto;\n  padding: 25px;\n}\n.quick-dialog-footer {\n  display: flex;\n}\n.quick-dialog-button {\n  flex: 1;\n  height: 48px;\n  color: #999;\n  background: #fff;\n  border: transparent 1px solid;\n  border-top-color: #f3f3f3;\n  border-radius: 0;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.quick-dialog-button:not(:first-child) {\n  border-left-color: #f3f3f3;\n}\n.quick-dialog-button:hover {\n  opacity: initial !important;\n}\n.quick-dialog-button:active, .quick-dialog-button:disabled {\n  opacity: initial !important;\n  background: #eee;\n}\n.quick-dialog-button.primary {\n  color: #333;\n}\n.quick-actionsheet {\n  position: fixed;\n  z-index: 5001;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #eee;\n}\n.quick-actionsheet-menu {\n  text-align: center;\n  border-top: #f6f6f6 1px solid;\n  background: #fff;\n  cursor: pointer;\n  line-height: 50px;\n  font-weight: 700;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.quick-actionsheet-menu:active {\n  background: #eee;\n}\n.quick-actionsheet-menu:first-child {\n  border: 0;\n}\n.quick-actionsheet-menu:last-child {\n  border: 0;\n  margin-top: 10px;\n  color: #ce2f33;\n}\n[quick-tooltip] {\n  position: relative;\n}\n[quick-tooltip]:before, [quick-tooltip]:after {\n  position: absolute;\n  visibility: hidden;\n  pointer-events: none;\n  opacity: 0;\n  bottom: 100%;\n  left: 50%;\n  transform: translate3d(-50%, -10px, 0);\n  transition: opacity .5s;\n}\n[quick-tooltip]:hover:before, [quick-tooltip]:hover:after {\n  visibility: visible;\n  opacity: 1;\n}\n[quick-tooltip]:before {\n  content: '';\n  z-index: 1001;\n  background: transparent;\n  border: 6px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.7);\n  margin-bottom: -12px;\n}\n[quick-tooltip]:after {\n  content: attr(quick-tooltip);\n  z-index: 1000;\n  margin-right: -300px;\n  padding: 6px 10px;\n  border-radius: 3px;\n  font-size: 14px;\n  line-height: 1.6;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n.quick-scale-in {\n  animation: scaleIn ease .3s forwards;\n}\n.quick-fade-in {\n  animation: fadeIn ease .3s forwards;\n}\n.quick-scale-out {\n  animation: scaleOut ease .3s forwards;\n}\n.quick-fade-out {\n  animation: fadeOut ease .3s forwards;\n}\n.quick-slide-up {\n  animation: slideUp ease .3s forwards;\n}\n.quick-slide-down {\n  animation: slideDown ease .3s forwards;\n}\n.quick-slide-left {\n  animation: slideLeft ease .3s forwards;\n}\n.quick-slide-right {\n  animation: slideRight ease .3s forwards;\n}\n.quick-datepicker-target {\n  cursor: pointer;\n  line-height: inherit;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='lightgray' d='M10.9 3.2H5.1v1.6H3.9V3.2H1.2v3.2h13.6V3.2h-2.7v1.6h-1.2V3.2zM12.1 2H15a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h2.9V.4h1.2V2h5.8V.4h1.2V2zm2.7 5.6H1.2v7.2h13.6V7.6z'%3E%3C/path%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: top 49% right 15px;\n  background-size: 16px;\n}\n.quick-datepicker-wrapper {\n  position: absolute;\n  z-index: 5001;\n  color: #666;\n  font-size: 13px;\n  background: #fff;\n  box-shadow: 0 0 16px rgb(0 0 0 / 8%);\n  user-select: none;\n}\n.quick-datepicker-header {\n  display: flex;\n  align-items: center;\n  height: 40px;\n  padding: 5px;\n  border-bottom: #eee 1px solid;\n}\n.quick-datepicker-text {\n  flex: 1;\n  text-align: center;\n  color: #6698ff;\n  font-size: 15px;\n  cursor: pointer;\n}\n.quick-datepicker-btn {\n  width: 26px;\n  height: 26px;\n  padding: 5px;\n  cursor: pointer;\n  border-radius: 3px;\n  transition: .3s all;\n}\n.quick-datepicker-btn path {\n  fill: #999;\n}\n.quick-datepicker-btn:hover {\n  background: #eee;\n}\n.quick-datepicker-body {\n  padding: 10px;\n}\n.quick-datepicker-body table {\n  width: 100%;\n  border-collapse: collapse;\n}\n.quick-datepicker-body tr {\n  border: 0;\n  height: auto;\n}\n.quick-datepicker-body th, .quick-datepicker-body td {\n  width: 32px;\n  height: 32px;\n  text-align: center;\n}\n.quick-datepicker-body td {\n  padding: 3px;\n}\n.quick-datepicker-body td>div {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  border-radius: 3px;\n  cursor: pointer;\n  transition: .3s all;\n}\n.quick-datepicker-body td>div:hover {\n  background: #eee;\n}\n.quick-datepicker-body td>div.today {\n  color: #fff;\n  background: #6698ff;\n}\n.quick-datepicker-body td>div.curr {\n  color: #fff;\n  background: #999;\n}\n.quick-datepicker-body td>div.minor {\n  color: #ccc;\n}\n@keyframes scaleIn {\n  from { transform: scale3d(0.8, 0.8, 1); }\n  to { transform: scale3d(1, 1, 1); }\n}\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n@keyframes scaleOut {\n  from { transform: scale3d(1, 1, 1); }\n  to { transform: scale3d(0.8, 0.8, 1); }\n}\n@keyframes fadeOut {\n  from { opacity: 1; }\n  to { opacity: 0; }\n}\n@keyframes slideUp {\n  from { transform: translate3d(0, 100%, 0); }\n  to { transform: translate3d(0, 0, 0); }\n}\n@keyframes slideDown {\n  from { transform: translate3d(0, 0, 0); }\n  to { transform: translate3d(0, 100%, 0); }\n}\n@keyframes slideLeft {\n  from { transform: translate3d(100%, 0, 0); }\n  to { transform: translate3d(0, 0, 0); }\n}\n@keyframes slideRight {\n  from { transform: translate3d(0, 0, 0); }\n  to { transform: translate3d(100%, 0, 0); }\n}\n@keyframes spin {\n  from { transform: rotate(0); }\n  to { transform: rotate(360deg); }\n}\n</style>");const Quick={LANGUAGE:{OK:"确定",YES:"确定",NO:"取消"},ATTACHMENT_API:"/attachment"};Object.assign(Element.prototype,{on(t,e){return this.addEventListener(t,e),this},off(t,e){return this.removeEventListener(t,e),this},addClass(t){return this.classList.add(t),this},removeClass(t){return this.classList.remove(t),this},remove(){return this.parentNode&&this.parentNode.removeChild(this)},val(t){if("SELECT"==this.tagName){for(let e of this)if(e.value==t){e.selected=!0,this.onchange&&this.onchange();break}return this}},disable(){"BUTTON"===this.tagName&&(this.disabled||(this.disabled=!0,this.loader=$('<div class="quick-btn-loading"></div>'),this.appendChild(this.loader)))},enable(){"BUTTON"===this.tagName&&this.disabled&&(this.disabled=!1,this.loader&&this.loader.remove())}}),Quick.$=window.$=function(t,e=!1){if("string"==typeof t){if(0===(t=t.replace(/[\t\r\n]/gm,"").trim()).indexOf("<")){return document.createRange().createContextualFragment(t).firstChild}return e?document.querySelectorAll(t):document.querySelector(t)}return t},Quick._=window._=function(t){document.body.appendChild(t)},Quick.loading={start(){this.$instance||(this.$instance=$('<div class="quick-loading"></div>'),_(this.$instance))},done(){this.$instance&&(this.$instance.remove(),this.$instance=null)}},Quick.progress={start(t=!0){this.status||(this.$instance=$('<div class="quick-progress"></div>'),_(this.$instance),this._observe(),t&&(this.status=1,this._trickle=setInterval((()=>{this.status<99&&(this.status+=Math.round((100-this.status)/3*Math.random()))}),300)))},tick(t){this.status=parseInt(t)},done(){this.status&&(this.status=100,clearInterval(this._trickle),setTimeout((()=>{this.status=0,this.$instance.remove()}),300))},_observe(){if(this._observed)return;this._observed=!0;let t=this.status;Object.defineProperty(this,"status",{get:()=>t,set:e=>{t=e,this.$instance.style.width=e+"%"}})}},Quick.info=function(t,e){Quick.$singleton&&(Quick.$singleton.remove(),Quick.$singleton=null),"number"==typeof e&&(e={duration:e}),e=Object.assign({duration:3e3,background:"rgba(0, 0, 0, 0.6)"},e);const n=$(`\n    <div class="quick-overlay quick-info">\n      <div style="background:${e.background}">${t}</div>\n    </div>\n  `);Quick.$singleton=n,n.addClass("quick-fade-in"),_(n),setTimeout((()=>{n.addClass("quick-fade-out"),n.on("animationend",n.remove)}),e.duration)},Quick.success=function(t,e={}){"number"==typeof e&&(e={duration:e}),e.background="rgba(43, 155, 23, 0.6)",this.info(t,e)},Quick.warn=function(t,e={}){"number"==typeof e&&(e={duration:e}),e.background="rgba(235, 166, 40, 0.6)",this.info(t,e)},Quick.error=function(t,e){e?"number"==typeof e&&(e={duration:e}):e={duration:5e3},e.background="rgba(217, 37, 7, 0.6)",this.info(t,e)},Quick.dialog=function(t={}){const e=$(`\n    <div class="quick-overlay quick-dialog">\n      <div class="quick-dialog-panel">\n        <div class="quick-dialog-body">${t.content}</div>\n      </div>\n    </div>\n  `),n=e.querySelector(".quick-dialog-panel");if(t.title){const e=$(`<div class="quick-dialog-header">${t.title}</div>`);n.insertBefore(e,n.firstChild)}if(t.buttons&&t.buttons.length>0){const i=$('<div class="quick-dialog-footer"></div>');n.appendChild(i),t.buttons.forEach((t=>{const n=$(`<button class="quick-dialog-button ${t.type||""}">${t.label}</button>`);i.append(n),n.on("click",(()=>{t.onclick?t.onclick(e,n):e.hide()}))}))}return e.hide=()=>{n.addClass("quick-scale-out"),e.addClass("quick-fade-out"),e.on("animationend",e.remove)},t.onload&&t.onload(e),_(e),!1!==t.animation&&(n.addClass("quick-scale-in"),e.addClass("quick-fade-in")),e},Quick.alert=function(t,e){return this.dialog({content:t,buttons:[{type:"primary",label:Quick.LANGUAGE.OK,onclick:function(t){e?e(t):t.hide()}}]})},Quick.confirm=function(t,e){return this.dialog({content:t,buttons:[{label:Quick.LANGUAGE.NO},{type:"primary",label:Quick.LANGUAGE.YES,onclick:(t,n)=>{e?e(t,n):t.hide()}}]})},Quick.actionSheet=function(t=[]){const e=$('\n    <div>\n      <div class="quick-overlay"></div>\n      <div class="quick-actionsheet"></div>\n    </div>\n  '),n=e.querySelector(".quick-overlay");n.onclick=()=>e.hide();const i=e.querySelector(".quick-actionsheet");return t.push({label:"取消"}),t.forEach((t=>{let n=$(`<div class="quick-actionsheet-menu">${t.label}</div>`);n.on("click",(n=>{e.hide(),t.onclick&&t.onclick(n)})),i.appendChild(n)})),e.hide=()=>{n.addClass("quick-fade-out"),i.addClass("quick-slide-down"),i.on("animationend",(()=>e.remove()))},_(e),n.addClass("quick-fade-in"),i.addClass("quick-slide-up"),e},Quick.slidingPage=function(t){const e=$(t);return e._paged||(e._paged=!0,e.addClass("quick-overlay"),e.display=getComputedStyle(e,null).display,e.style.display="none",e.show=function(){return e.style.display=this.display,this.removeClass("quick-slide-right"),this.addClass("quick-slide-left"),this},e.hide=function(){return this.removeClass("quick-slide-left"),this.addClass("quick-slide-right"),this}),e},Quick.DatePicker=class{constructor(t){this.$target=$(t),this.$target.readOnly=!0,this.$target.className="quick-datepicker-target",this.$target.on("click",(()=>{if(this.isOpen)this.close();else{this.render(this.getInitDate());const t=this.$target.getBoundingClientRect();this.$wrapper.style.top=t.y+t.height+2+"px",this.$wrapper.style.left=t.x+"px"}}))}render(t){this.isOpen||(this.$overlay=$('<div class="quick-overlay" style="background:none"></div>'),this.$overlay.on("click",(t=>this.close())),_(this.$overlay),this.$wrapper=$('<div class="quick-datepicker-wrapper"></div>'),this.bindEvents(),_(this.$wrapper),this.isOpen=!0),this.createHtml(t)}createHtml(t){const e=this.calData=this.getCalendarData(t);let n='<div class="quick-datepicker-header"><svg class="quick-datepicker-btn prev-year" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.984 7l4.75 4.762-.832.817-3.924-3.924-3.99 3.99-.825-.836L7.973 7l.005.006L7.984 7zm0-4l4.75 4.762-.832.817-3.924-3.924-3.99 3.99-.825-.836L7.973 3l.005.006L7.984 3z" transform="rotate(-90 7.949 7.822)"></path></svg><svg class="quick-datepicker-btn prev-month" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.978 11.997l-.005.006L2.3 6.33l.83-.831 4.848 4.848L12.826 5.5l.83.83-5.673 5.673-.005-.006z" transform="rotate(90 7.978 8.751)"></path></svg><span class="quick-datepicker-text">'+e.year+"-"+this.padding(e.month)+'</span><svg class="quick-datepicker-btn next-month" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.978 11.498l-.005.005L2.3 5.831 3.13 5l4.848 4.848L12.826 5l.83.831-5.673 5.672-.005-.005z" transform="rotate(-90 7.978 8.252)"></path></svg><svg class="quick-datepicker-btn next-year" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.984 7l4.75 4.762-.832.817-3.924-3.924-3.99 3.99-.825-.836L7.973 7l.005.006L7.984 7zm0-4l4.75 4.762-.832.817-3.924-3.924-3.99 3.99-.825-.836L7.973 3l.005.006L7.984 3z" transform="rotate(90 7.949 8.122)"></path></svg></div><div class="quick-datepicker-body"><table><thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead><tbody>';const i=new Date,r=this.getInitDate();for(let t=0;t<e.days.length;t++){t%7==0&&(n+="<tr>");const a=e.days[t];let o="";e.month!=a.month&&(o="minor"),e.year==r.getFullYear()&&a.month==r.getMonth()+1&&a.day==r.getDate()&&(o="curr"),e.year==i.getFullYear()&&a.month==i.getMonth()+1&&a.day==i.getDate()&&(o="today"),n+='<td><div data-index="'+a.index+'" class="'+o+'">'+a.day+"</div></td>",t%7==6&&(n+="</tr>")}n+="</tbody></table></div>",this.$wrapper.innerHTML=n}bindEvents(){this.$wrapper.on("click",(t=>{const e=t.target;if("TD"===e.parentNode.tagName){const t=new Date(this.calData.year,this.calData.month-1,e.dataset.index);this.$target.value=this.format(t),this.close()}const n=this.$wrapper.querySelector(".quick-datepicker-text");if(n.contains(e))return this.render(this.getInitDate());const i=this.$wrapper.querySelector(".prev-year"),r=this.$wrapper.querySelector(".prev-month"),a=this.$wrapper.querySelector(".next-month"),o=this.$wrapper.querySelector(".next-year"),s=new Date(n.innerHTML);if(i.contains(e))s.setFullYear(s.getFullYear()-1);else if(r.contains(e))s.setMonth(s.getMonth()-1);else if(a.contains(e))s.setMonth(s.getMonth()+1);else{if(!o.contains(e))return;s.setFullYear(s.getFullYear()+1)}this.render(s)}))}close(){this.$overlay.remove(),this.$wrapper.remove(),this.isOpen=!1}format(t){return t.getFullYear()+"-"+this.padding(t.getMonth()+1)+"-"+this.padding(t.getDate())}padding(t){return t<=9?"0"+t:t}getInitDate(){return this.$target.value?new Date(this.$target.value):new Date}getCalendarData(t=new Date){const e=t.getFullYear(),n=t.getMonth()+1,i=new Date(e,n-1,1),r=new Date(e,n,0).getDate();let a=i.getDay();0===a&&(a=7);const o=a-1,s=new Date(e,n-1,0).getDate(),c=[];for(let t=0;t<42;t++){const e=t+1-o;let i=e,a=n;e<=0?(a=n-1,i=s+e):e>r&&(a=n+1,i-=r),0===a&&(a=12),a>12&&(a=1),c.push({month:a,day:i,index:e})}return{year:e,month:n,days:c}}},Quick.FlexTable=class{constructor(t,e=0){this.$table=$(t),this.createHandlers(e)}createHandlers(t){Array.from(this.$table.rows).forEach(((e,n)=>{const i=e.insertCell(0);if(i.style.overflow="initial",i.style.padding=0,i.style.width="50px",n<t)return;const r=this.createMinusIcon(e);r.style.visibility="hidden",i.appendChild(r);const a=this.createPlusIcon();a.onclick=()=>this.addRow(e),i.appendChild(a);const o=e.getAttribute("deletable");""!=o&&"true"!=o||(r.style.visibility="visible",r.onclick=()=>this.removeRow(e))}))}addRow(t){const e=t.cloneNode(!0);e.querySelectorAll('input[type="text"]:not([reserved]),input[type="hidden"]:not([reserved])').forEach((t=>t.value=""));e.querySelectorAll("[removed]").forEach((t=>t.remove()));const n=e.querySelector("div:first-child");n.style.visibility="visible",n.onclick=()=>this.removeRow(e);e.querySelector("div:last-child").onclick=()=>this.addRow(e),this.insertAfter(e,t)}removeRow(t){this.onRowRemove?this.onRowRemove(t):t.remove()}createPlusIcon(){return this.createIcon('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="24" height="24"><path fill="var(--primary-color)" d="M978 162c0-64-52-116-116-116H162C98 46 46 98 46 162v700c0 64 52 116 116 116h700c64 0 116-52 116-116zM768 563H563v205H461V563H256V461h205V256h102v205h205z"/></svg>')}createMinusIcon(){return this.createIcon('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="24" height="24"><path fill="#999" d="M978 162c0-64-52-116-116-116H162C98 46 46 98 46 162v700c0 64 52 116 116 116h700c64 0 116-52 116-116zM768 563H256V461h512z"/></svg>')}createIcon(t){const e=document.createElement("div");return e.style.display="inline-flex",e.style.verticalAlign="middle",e.style.cursor="pointer",e.innerHTML=t,e}insertAfter(t,e){e.parentNode.insertBefore(t,e.nextSibling)}},Quick.Attachment=class{constructor(t,e,n){if(this.editable=!!n,this.$target=$(t),this.$wrapper=$('<div class="attachment"></div>'),this.$target.appendChild(this.$wrapper),this.editable){const t=n.mimeTypes||"*.*";this.maxSize=n.maxSize||10,this.$wrapper.appendChild($(`<div><input type="file" accept="${t}" multiple/><a>上传附件</a></div>`));const e=this.$wrapper.querySelector('input[type="file"]');e.on("change",(t=>this.upload(t)));this.$wrapper.querySelector('input[type="file"]+a').on("click",(()=>e.click()))}this.$fileList=$('<div class="file-list"></div>'),this.$wrapper.appendChild(this.$fileList),this.build(e)}build(t){t=t||[];for(const e of t){const t=e.filePath.replace(/^\/attachment\//,"/download/"),n=this.editable?'<img class="icon cross" src="/images/cross.png" title="删除"/>':"",i=$(`<div class="item">\n        <a target="_blank" href="${e.filePath}">${e.originalName}</a>\n        <a href="${t}" download="${e.originalName}"><img class="icon" src="/images/down.png" title="下载"/></a>\n        ${n}\n        <input type="hidden" name="attachmentId" value="${e.attachmentId}"/>\n        <input type="hidden" name="filePath" value="${e.filePath}"/>\n        <input type="hidden" name="originalName" value="${e.originalName}"/>\n        <input type="hidden" name="state" value="${e.state.code}"/>\n      </div>`),r=i.querySelector("img.cross");r&&r.on("click",(t=>this.delete(t))),this.$fileList.appendChild(i)}}upload(t){const e=t.target.files;if(!e||0===e.length)return;if(e.length>9)return Quick.error("一次最多上传9个附件");for(const t of e)if(t.size>1024*this.maxSize*1024)return Quick.error("请将附件大小控制在"+this.maxSize+"MB以内，确实无法精简时可以（但不推荐）采用分卷压缩方式上传");const n=new FormData;for(const t of e)n.append("files",t);const i=$('<div class="loading"></div>');this.$fileList.appendChild(i),Quick.http.post(Quick.ATTACHMENT_API,n).then((t=>{i.remove(),t&&(Quick.success("上传成功"),this.build(t))}))}delete(t){const e=t.target.parentNode,n=Quick.form.getJsonObject(e);Quick.confirm("确定删除该附件吗？",((t,i)=>{if(1==n.state)return t.hide(),e.querySelector('[name="state"]').value=-1,void(e.style.display="none");i.disable(),Quick.http.del(Quick.ATTACHMENT_API,n).then((n=>{i.enable(),n&&(t.hide(),Quick.success("删除成功"),e.remove())}))}))}list(){const t=this.$wrapper.querySelectorAll(".file-list div");return Quick.form.getJsonArray(t)}},Quick.util={round:(t,e)=>Math.round(t+"e"+e)/Math.pow(10,e),stringify:t=>Object.keys(t).map((e=>e+"="+encodeURI(t[e]))).join("&"),copyText(t){const e=navigator.clipboard;if(!e)return Quick.error("浏览器不支持剪贴板");e.writeText(t).then((()=>Quick.success("复制成功")),(()=>Quick.error("复制失败")))}},Quick.form={getJsonObject(t){const e=(t=$(t)).querySelectorAll('[name]:not([name=""])'),n={};for(let t=0;t<e.length;t++){const i=e[t];if(("checkbox"==i.type||"radio"==i.type)&&!i.checked)continue;let r="";r="INPUT"===i.tagName||"TEXTAREA"===i.tagName?i.value=i.value.trim():"SELECT"===i.tagName?i.options[i.selectedIndex].value:i.isContentEditable?i.innerHTML=i.innerHTML.trim():i.textContent=i.textContent.trim();let a=i.getAttribute("required");if(a=null!==a&&"false"!==a,!this.validate(r,a,i.dataset.rule))return i.focus(),void Quick.error(i.dataset.message||"光标处数据不能为空或输入格式有误");const o=i.getAttribute("name");n[o]?n[o]+=","+r:n[o]=r}return n},getJsonArray(t){const e=[];t=$(t,!0);for(let n=0;n<t.length;n++){const i=this.getJsonObject(t[n]);if(!i)return;0!==Object.keys(i).length&&e.push(i)}return e},validate(t,e,n){if(e&&!t)return!1;if(!n)return!0;if(!t)return!0;const i=n.match(/^(?<type>[a-z0-9]+)(\((?<min>\-?\d+)(,\s*(?<max>\-?\d+))?\))?$/);if(!i)return!0;const r=i.groups,a=this.validator[r.type];return!a||a(t,r.min,r.max)},validator:{varchar:function(t,e,n){n||(n=e,e=0);return new RegExp("^.{"+e+","+n+"}$").test(t)},integer:function(t,e){return new RegExp("^\\-?\\d{0,"+e+"}$").test(t)},decimal:function(t,e,n){return new RegExp("^\\-?\\d{0,"+e+"}(\\.\\d{0,"+n+"})?$").test(t)},date:function(t){const e=t.match(/^(\d{4})\-(\d{2})\-(\d{2})$/);if(e){const t=new Date(e[1],e[2]-1,e[3]);return t.getFullYear()==e[1]&&t.getMonth()==e[2]-1&&t.getDate()==e[3]}return!1}}},Quick.http={get(t){return this.request("GET",t)},post(t,e){return this.request("POST",t,e)},put(t,e){return this.request("PUT",t,e)},del(t,e){return this.request("DELETE",t,e)},async request(t,e,n){const i={method:t,headers:{},body:n};"[object FormData]"!=Object.prototype.toString.call(n)&&(i.headers["content-type"]="application/json; charset=utf-8",i.body=JSON.stringify(n));try{const t=await(await fetch(e,i)).json();return t.error&&t.message&&t.status&&t.status>=400?Quick.error(t.message):t}catch(t){Quick.error("网络连接异常")}}};
//# sourceMappingURL=/sm/8106d2ee408394257e8707de4955477c134ab4f189f68d36c412ee837d406a62.map
